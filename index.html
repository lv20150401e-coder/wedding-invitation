<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>電子喜帖</title>

<style>
:root{
  --bg:#f7f2ee;
  --card:rgba(255,255,255,.85);
  --shadow:0 18px 60px rgba(0,0,0,.18);
  --radius:22px;
  --maxW:420px;
}

html,body{height:100%}
body{
  margin:0;
  font-family:sans-serif;
  background:var(--bg);
  overflow:hidden;
}

.stage{height:100%;display:grid;place-items:center;position:relative}

/* envelope */
.envelopeWrap{
  width:min(var(--maxW),92vw);
  aspect-ratio:4/3;
  display:grid;
  place-items:center;
  cursor:pointer;
}
@keyframes floatHint{
  0%,100%{ transform: translateY(0); }
  50%{ transform: translateY(-8px); }
}
.envelope{
    width: 100%;
    height: 100%;
    position: relative;
    border-radius: var(--radius);
    box-shadow:
      0 18px 40px rgba(0,0,0,.18),
      inset 0 2px 8px rgba(255,255,255,.6),
      inset 0 -6px 14px rgba(0,0,0,.08);
    background:
    linear-gradient(180deg,#f6d6da,#e7b7bd);

    overflow: hidden;
  }
  
  /* 信封底紙 */
  .envBack{
    position:absolute;
    inset:0;
    background:
    linear-gradient(180deg,#f9e3e6,#efc7cc);
  }
  
  /* 上蓋更立體 */
  .envFlap{
    position:absolute;
    left:0;
    right:0;
    top:-2%;
    height:55%;
    background:
    linear-gradient(180deg,#f7dde1,#efc5ca);
    clip-path: polygon(0 0,100% 0,50% 100%);
    transform-origin: top center;
    transition: transform .6s ease;
    box-shadow: 0 8px 20px rgba(0,0,0,.12);
  }
  @keyframes flapHint{
    0%,100%{ transform: rotateX(0deg); }
    50%{ transform: rotateX(18deg); }
  }
  .envSeal{
    position:absolute;
    inset:auto 0 0 0;        /* 左右自動 */
    margin:auto;             /* 水平置中 */
    top:48%;
    width:160px;
    transform:translateY(-50%);
  }
  
  .tapHint{
    position:absolute;
    top:74%;
    left:40%;
    transform:translateX(-50%);
    font-size:30px;
    letter-spacing:.15em;
    color:#9a8776;
    animation: floatHint 2.2s ease-in-out infinite;
  }
  .sealBase{
    width:100%;
    display:block;
    filter: drop-shadow(0 14px 18px rgba(0,0,0,.25));
  }
  
  /* 紙漿icon */
  .sealIcon{
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:65%;
    opacity:.95;
  
    filter:
      drop-shadow(0 2px 2px rgba(0,0,0,.35))
      brightness(1.1)
      contrast(1.1);
  }
  
  
  /* 外圈壓印 */
  .envSeal::before{
    content:"";
    position:absolute;
    inset:10px;
    border-radius:50%;
    border:2px solid rgba(255,255,255,.28);
    box-shadow:
      inset 0 2px 6px rgba(255,255,255,.25),
      inset 0 -6px 10px rgba(0,0,0,.22);
    opacity:.95;
  }
  
  /* 內圈壓印 */
  .envSeal::after{
    content:"";
    position:absolute;
    inset:18px;
    border-radius:50%;
    border:1px solid rgba(0,0,0,.18);
    opacity:.25;
  }
  .envSeal.ink{
    position:absolute;
    left:50%;
    top:58%;
    transform:translate(-50%,-50%);
    width:78px;
    height:78px;
    border-radius:50%;
    z-index:6;
  
    background:#c62828;
  
    /* 油墨不均勻質感 */
    box-shadow:
      inset 0 0 0 3px rgba(255,255,255,.35),
      inset 0 0 14px rgba(0,0,0,.45),
      0 10px 18px rgba(0,0,0,.25);
  
    display:flex;
    align-items:center;
    justify-content:center;
  
    /* 油墨暈染 */
    filter: contrast(1.1) saturate(1.2);
  }
  
  /* 外圈印章 */
  .envSeal.ink::before{
    content:"";
    position:absolute;
    inset:8px;
    border-radius:50%;
    border:2px solid rgba(255,255,255,.5);
    opacity:.7;
  }
  
  /* V&L 印章字 */
  .sealMonogram{
    font-family: "Playfair Display", serif;
    font-weight:700;
    font-size:24px;
    letter-spacing:.12em;
    color:white;
  
    /* 模擬印章粗糙 */
    text-shadow:
      0 0 2px rgba(255,255,255,.3),
      0 2px 3px rgba(0,0,0,.35);
  }
  /* 手機更順眼 */
  @media (max-width:420px){
    .envSeal{ width:70px; height:70px; }
    .sealMonogram{ font-size:20px; }
  }
  
/* overlay */
.invitationOverlay{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  opacity:0;
  pointer-events:none;
  transition:.35s;
}
.invitation{
    width: min(96vw, 520px);
    aspect-ratio: 9 / 16;
    max-height: 92vh;

    display:flex;              /* ⭐ 新增 */
    flex-direction:column;     /* ⭐ 新增 */
    overflow:hidden;           /* ⭐ 新增 */
    box-shadow:
    0 40px 80px rgba(0,0,0,.25),   /* 外陰影 */
    0 10px 20px rgba(0,0,0,.12),
    inset 0 1px 0 rgba(255,255,255,.6); /* 上緣微亮 */
    transform: translateY(140%) scale(.96);
    transition: transform .45s cubic-bezier(.22,.8,.2,1);
}
  /* 第1段：先露出20% */
  body.open.stage1 .invitation{
    transform: translateY(20%) scale(.98);
  }
  
  /* 第2段：完全抽出 */
  body.open.stage2 .invitation{
    transform: translateY(0) scale(1);
  }

.invHeader{padding:14px;border-bottom:1px solid #eee}

/* scroll */
.invScroll{
    flex:1;
    overflow:auto;
    scroll-snap-type:y mandatory;
  
    scrollbar-width:none;          /* Firefox */
    -ms-overflow-style:none;       /* IE */
  }
  
  .invScroll::-webkit-scrollbar{
    display:none;                  /* Chrome / Safari */
  }

.page{
  min-height:100%;                /* ⭐ 每頁滿版 */
  scroll-snap-align:start;
  padding:18px;
}
.closeBtn{
  position:absolute;
  bottom:22px;
  left:50%;
  transform:translateX(-50%);

  font-size:20px;        /* 字變大 */
  padding:14px 38px;
  border-radius:40px;
  border:none;
  background:linear-gradient(180deg,#e8d7c2,#cdb191);
  color:#5a4633;
  box-shadow:0 6px 14px rgba(0,0,0,.18);
}
/* open state */
body.open .invitationOverlay{opacity:1;pointer-events:auto}
body.open .envFlap{
    transform: rotateX(170deg);
  }
  body.open .envelopeWrap{
    transform: translateY(40px) scale(.95);
  }
</style>
</head>

<body>

<div class="stage">

  <div class="envelopeWrap" id="envelope">
    <div class="envelope">
      <div class="envBack"></div>
      <div class="envFlap"></div>
      <div class="envFront"></div>
      <div class="envSeal">
        <img src="assets/seal.png" class="sealIcon">
      </div>
      <div class="tapHint"> 點擊</div>

      <svg class="envArcName" viewBox="0 0 400 200">
        <defs>
          <path id="curve"
                d="M 40 140 A 160 120 0 0 1 360 140" />
        </defs>

      </svg>
  


    </div>
  </div>

<div class="invitationOverlay" id="overlay">
  <div class="invitation">

    <!-- <div class="invHeader">WEDDING INVITATION</div> -->

    <div class="invScroll" id="invScroll">

      <section class="page">
        <video src="assets/page1.mp4" autoplay muted loop playsinline style="width:100%"></video>
      </section>
      
      <section class="page">
        <img src="assets/page2.png" style="width:100%; display:block;">
      </section>

  <section class="page">
    <div onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSepHyoOZzPUwyCf1KPVupWtb-9ZwFAGm5eyyOmQjuB9AxaFbg/viewform?usp=sharing&ouid=103429032752878794749','_blank')">
      <video
        src="assets/page3.mp4"
        autoplay
        muted
        loop
        playsinline
        style="width:100%; display:block;">
      </video>
    </div>
  </section>
  <section class="page">
    <img src="assets/page4.png" style="width:100%; display:block;">
    <button class="closeBtn" id="closeBottom">
      收回信封
    </button>

  </section>



  </div>
</div>

</div>

<script>
const body=document.body;
const envelope=document.getElementById('envelope');
const closeBottom=document.getElementById('closeBottom');
const invScroll=document.getElementById('invScroll');

function openInvitation(){
    body.classList.add('open','stage1');
  
    setTimeout(()=>{
      body.classList.add('stage2');
    }, 350);   // 第二段抽出
  }
  function closeInvitation(){
    body.classList.remove('open','stage1','stage2');
    invScroll.scrollTop = 0;
  }

envelope.onclick=openInvitation;
closeBottom.onclick=closeInvitation;
</script>

</body>
</html>
