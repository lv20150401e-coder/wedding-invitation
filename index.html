<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>電子喜帖</title>

<style>
:root{
  --bg:#f7f2ee;
  --card:rgba(255,255,255,.85);
  --shadow:0 18px 60px rgba(0,0,0,.18);
  --radius:22px;
  --maxW:420px;
}

html,body{height:100%}
body{
  margin:0;
  font-family:sans-serif;
  background:var(--bg);
  overflow:hidden;
}

.stage{height:100%;display:grid;place-items:center;position:relative}

/* envelope */
.envelopeWrap{
  width:min(var(--maxW),92vw);
  aspect-ratio:4/3;
  display:grid;
  place-items:center;
  cursor:pointer;
}
.envelope{
    width: 100%;
    height: 100%;
    position: relative;
    border-radius: var(--radius);
    box-shadow:
      0 18px 40px rgba(0,0,0,.18),
      inset 0 2px 8px rgba(255,255,255,.6),
      inset 0 -6px 14px rgba(0,0,0,.08);
    background:
      linear-gradient(180deg,#fffdf8,#f4efe6);
    overflow: hidden;
  }
  
  /* 信封底紙 */
  .envBack{
    position:absolute;
    inset:0;
    background:
      linear-gradient(180deg,#fffdf9,#efe6da);
  }
  
  /* 上蓋更立體 */
  .envFlap{
    position:absolute;
    left:0;
    right:0;
    top:-2%;
    height:55%;
    background:
      linear-gradient(180deg,#f8f1e8,#ffffff);
    clip-path: polygon(0 0,100% 0,50% 100%);
    transform-origin: top center;
    transition: transform .6s ease;
    box-shadow: 0 8px 20px rgba(0,0,0,.12);
  }
  
  /* 封蠟 */
  .envSeal{
    position:absolute;
    left:50%;
    top:55%;
    transform:translate(-50%,-50%);
    z-index: 5;   /* ⭐ 新增 */
  }
  .envNames{
    position:absolute;
    left:50%;
    top:78%;                 /* 在蠟印下方 */
    transform:translate(-50%,-50%);
    font-family:'JasonHandwriting2', cursive;
    font-size:26px;
    letter-spacing:.08em;
    color:#8c6b5a;
    z-index:4;
    text-align:center;
  
    text-shadow:
      0 1px 0 #fff,
      0 2px 6px rgba(0,0,0,.15);   /* 微立體 */
  }
  
  .envFront{
    position:absolute;
    inset:0;
    background:
      linear-gradient(135deg, transparent 49.5%, rgba(0,0,0,.05) 50%, transparent 50.5%),
      linear-gradient(-135deg, transparent 49.5%, rgba(0,0,0,.05) 50%, transparent 50.5%);
    clip-path: polygon(0 100%, 0 22%, 50% 58%, 100% 22%, 100% 100%);
    z-index:2;
  }
  
  .envFlap{
    z-index:3;
  }
  
  .envSeal{
    position:absolute;
    left:50%;
    top:58%;
    transform:translate(-50%,-50%);
    width:62px;
    height:62px;
    border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #ffb7d5, #c2185b);
    color:white;
    display:grid;
    place-items:center;
    font-weight:700;
    letter-spacing:.1em;
    z-index:5;
    box-shadow:
      0 10px 20px rgba(0,0,0,.25),
      inset 0 3px 6px rgba(255,255,255,.5);
  }
/* overlay */
.invitationOverlay{
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  opacity:0;
  pointer-events:none;
  transition:.35s;
}
.invitation{
    width: min(96vw, 520px);
    aspect-ratio: 9 / 16;
    max-height: 92vh;

    display:flex;              /* ⭐ 新增 */
    flex-direction:column;     /* ⭐ 新增 */
    overflow:hidden;           /* ⭐ 新增 */
    box-shadow:
    0 40px 80px rgba(0,0,0,.25),   /* 外陰影 */
    0 10px 20px rgba(0,0,0,.12),
    inset 0 1px 0 rgba(255,255,255,.6); /* 上緣微亮 */
    transform: translateY(140%) scale(.96);
    transition: transform .45s cubic-bezier(.22,.8,.2,1);
}
  /* 第1段：先露出20% */
  body.open.stage1 .invitation{
    transform: translateY(20%) scale(.98);
  }
  
  /* 第2段：完全抽出 */
  body.open.stage2 .invitation{
    transform: translateY(0) scale(1);
  }

.invHeader{padding:14px;border-bottom:1px solid #eee}

/* scroll */
.invScroll{
    flex:1;
    overflow:auto;
    scroll-snap-type:y mandatory;
  
    scrollbar-width:none;          /* Firefox */
    -ms-overflow-style:none;       /* IE */
  }
  
  .invScroll::-webkit-scrollbar{
    display:none;                  /* Chrome / Safari */
  }

.page{
  min-height:100%;                /* ⭐ 每頁滿版 */
  scroll-snap-align:start;
  padding:18px;
}

/* open state */
body.open .invitationOverlay{opacity:1;pointer-events:auto}
body.open .envFlap{
    transform: rotateX(170deg);
  }
  body.open .envelopeWrap{
    transform: translateY(40px) scale(.95);
  }
</style>
</head>

<body>

<div class="stage">

  <div class="envelopeWrap" id="envelope">
    <div class="envelope">
      <div class="envBack"></div>
      <div class="envFlap"></div>
      <div class="envFront"></div>
  
      <svg class="envArcName" viewBox="0 0 400 200">
        <defs>
          <path id="curve"
                d="M 40 140 A 160 120 0 0 1 360 140" />
        </defs>

      </svg>
  
      <div class="envSeal">OPEN</div>
      <div class="envNames">
            建文 Vito &amp; 宛儒 Lisa
      </div>
    </div>
  </div>

<div class="invitationOverlay" id="overlay">
  <div class="invitation">

    <!-- <div class="invHeader">WEDDING INVITATION</div> -->

    <div class="invScroll" id="invScroll">

      <section class="page">
        <video src="assets/page1.mp4" autoplay muted loop playsinline style="width:100%"></video>
      </section>
      
      <section class="page">
        <video src="assets/page2.mp4" autoplay muted loop playsinline style="width:100%"></video>
      </section>

  <section class="page">
    <div onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSe4WD5uK4nAKwneQatdNFutFORNLytRxq51F-GigX4q1zPj9w/viewform','_blank')">
      <video
        src="assets/page3.mp4"
        autoplay
        muted
        loop
        playsinline
        style="width:100%; display:block;">
      </video>
    </div>
  </section>



    <button id="closeBottom">收回信封</button>

  </div>
</div>

</div>

<script>
const body=document.body;
const envelope=document.getElementById('envelope');
const closeBottom=document.getElementById('closeBottom');
const invScroll=document.getElementById('invScroll');

function openInvitation(){
    body.classList.add('open','stage1');
  
    setTimeout(()=>{
      body.classList.add('stage2');
    }, 350);   // 第二段抽出
  }
  function closeInvitation(){
    body.classList.remove('open','stage1','stage2');
    invScroll.scrollTop = 0;
  }

envelope.onclick=openInvitation;
closeBottom.onclick=closeInvitation;
</script>

</body>
</html>
